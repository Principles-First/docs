---
title: "감사 로깅"
description: "규정 준수 및 보안 모니터링을 위한 포괄적인 감사 추적"
---

## 개요

Moss는 규정 준수 요구 사항을 충족하고 보안 사고를 조사하는 데 도움이 되는 포괄적인 감사 로깅을 제공합니다. 모든 API 요청을 추적, 검토 및 분석할 수 있습니다.

---

## 로깅되는 내용

### 인바운드 요청 (SDK에서 백엔드로)

| 필드 | 설명 |
|------|------|
| 타임스탬프 | 요청이 수신된 시간 |
| 애플리케이션 ID | 요청을 보낸 애플리케이션 |
| 사용자 ID | 인증된 사용자 |
| 세션 ID | 연결된 채팅 세션 |
| 엔드포인트 | 호출된 API 엔드포인트 |
| 요청 페이로드 | 정제된 요청 본문 |
| 응답 상태 | HTTP 상태 코드 |
| 기간 | 요청 처리 시간 |

### 아웃바운드 요청 (백엔드에서 외부 서비스로)

| 필드 | 설명 |
|------|------|
| 타임스탬프 | 요청이 이루어진 시간 |
| 대상 서비스 | LLM 제공자, 임베딩 API, 스토리지 |
| 제공자 | 특정 제공자 (OpenAI, Google 등) |
| 모델 | 요청에 사용된 모델 |
| 요청 요약 | 정제된 요청 세부 정보 |
| 응답 상태 | 성공/실패 |
| 토큰 수 | LLM 요청용 |

---

## 민감한 데이터 편집

모든 감사 로그는 저장 전에 자동으로 정제됩니다:

### 편집되는 필드

다음 필드는 자동으로 편집됩니다:

- `api_key`, `apiKey`
- `authorization`
- `password`
- `secret`
- `token`
- `x-api-key`

### 편집 예시

```json
// 원본 요청
{
  "headers": {
    "authorization": "Bearer eyJhbG...",
    "x-api-key": "app_abc123"
  },
  "body": {
    "query": "비밀번호를 어떻게 재설정하나요?"
  }
}

// 로깅됨 (정제됨)
{
  "headers": {
    "authorization": "[REDACTED]",
    "x-api-key": "[REDACTED]"
  },
  "body": {
    "query": "비밀번호를 어떻게 재설정하나요?"
  }
}
```

<Info>
    편집은 재귀적입니다 - 중첩된 객체와 배열도 정제됩니다.
</Info>

---

## 애플리케이션별 제어

감사 로깅은 애플리케이션별로 활성화 또는 비활성화할 수 있습니다:

### 대시보드 설정

**설정 > 개발자 옵션 > 감사 로깅**으로 이동하여 애플리케이션의 로깅을 활성화하거나 비활성화합니다.

### 고려 사항

| 감사 로깅 | 사용 사례 |
|----------|----------|
| **활성화됨** | 규정 준수 요구 사항, 보안에 민감한 애플리케이션 |
| **비활성화됨** | 저장 비용이 우려되는 대용량 애플리케이션 |

<Tip>
    특히 민감한 데이터를 처리하는 모든 프로덕션 애플리케이션에 감사
    로깅을 활성화하는 것이 좋습니다.
</Tip>

---

## 감사 로그 접근

### 대시보드 접근

**분석 > 감사 로그**에서 대시보드의 감사 로그를 봅니다.

기능:
- 날짜 범위별 필터
- 사용자 또는 세션별 필터
- 엔드포인트 또는 상태별 필터
- CSV로 내보내기

### API 접근

감사 API를 사용하여 프로그래밍 방식으로 감사 로그를 쿼리합니다:

```bash
curl -X GET "https://api.viamoss.ai/v1/audit-logs" \
  -H "Authorization: Bearer YOUR_AUDIT_API_KEY" \
  -H "X-Application-Id: YOUR_APP_ID" \
  -d "start_date=2024-01-01" \
  -d "end_date=2024-01-31"
```

### 감사 API 키

감사 로그 접근에는 별도의 API 키가 사용됩니다:

- **격리된 접근** - 감사 키는 SDK API 키와 별도
- **읽기 전용** - 로그나 다른 데이터 수정 불가
- **폐기 가능** - 독립적으로 폐기 가능

---

## 로그 보존

### 기본 보존

| 로그 유형 | 보존 기간 |
|----------|----------|
| API 요청 로그 | 90일 |
| LLM 호출 로그 | 90일 |
| 보안 이벤트 | 1년 |

### 사용자 정의 보존

규정 준수 요구 사항에 따른 사용자 정의 보존 기간은 지원팀에 문의하세요.

---

## 사용 사례

### 규정 준수 보고

감사자를 위한 보고서 생성:

1. 날짜 범위별 로그 필터
2. CSV로 내보내기
3. 규정 준수 문서에 포함

### 보안 조사

의심스러운 활동 조사:

1. 사용자 또는 세션 식별
2. 모든 관련 요청 검토
3. 비정상적인 패턴 확인
4. 사고 대응을 위한 증거 내보내기

### 성능 분석

API 사용 패턴 분석:

1. 요청 기간 검토
2. 느린 엔드포인트 식별
3. LLM 토큰 사용량 추적
4. 데이터 기반 최적화

### 비용 분석

LLM 사용 비용 추적:

1. 모델별 토큰 수 검토
2. 높은 사용량 세션 식별
3. 프롬프트 및 컨텍스트 최적화

---

## 로그 무결성

### 불변성

감사 로그는 생성 후 불변입니다:

- 로그는 생성 후 수정 불가
- 로그는 애플리케이션 소유자가 삭제 불가
- 데이터 보존 정책을 통해서만 삭제

### 타임스탬프

모든 타임스탬프는:

- UTC로 정규화됨
- 서버 측에서 생성됨
- 클라이언트가 지정 불가

---

## 모범 사례

### 프로덕션에 활성화

다음을 위해 항상 프로덕션 애플리케이션에 감사 로깅을 활성화하세요:

- 규정 준수 요구 사항 충족
- 사고 조사 가능
- 사용 패턴 추적

### 정기적 검토

다음을 위해 감사 로그를 주기적으로 검토하세요:

- 비정상적인 접근 패턴
- 실패한 인증 시도
- 예기치 않은 API 사용

### API 키 보안

감사 API 키 보호:

- 안전하게 저장 (코드에 포함하지 않음)
- 주기적으로 로테이션
- 무단 사용 모니터링

---

## 다음 단계

<CardGroup cols={2}>
    <Card
        title="규정 준수"
        icon="certificate"
        href="/ko/security/compliance"
    >
        GDPR, 데이터 삭제 및 인증
    </Card>
    <Card
        title="인증"
        icon="key"
        href="/ko/security/authentication"
    >
        SDK 통합 보안
    </Card>
</CardGroup>
