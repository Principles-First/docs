---
title: "Runtime API"
description: "Dynamically configure Moss after initialization"
---

## Overview

The Runtime API allows you to change Moss configuration dynamically after the SDK has been initialized. These changes take the **highest priority**, overriding both Dashboard settings and SDK initialization options.

<Info>
    Runtime configuration is ideal for responding to user actions, implementing
    feature flags, or adjusting settings based on real-time conditions.
</Info>

---

## The configure() Method

Use `window.Moss.configure()` to update settings at runtime:

```javascript
window.Moss.configure({
    language: 'ko',
    enableSessionRecording: false
})
```

### Syntax

```javascript
window.Moss.configure(options: Partial<MossConfig>): void
```

The method accepts a partial configuration object - you only need to specify the settings you want to change.

---

## Available Runtime Options

Not all settings can be changed at runtime. Here's what you can configure:

### Fully Supported

| Option | Type | Description |
|--------|------|-------------|
| `language` | `'en' \| 'ko'` | UI language |
| `enableSessionRecording` | `boolean` | Session recording toggle |
| `enableScreenHistoryRecording` | `boolean` | Screen history for AI context |
| `planning` | `object` | Planning configuration |

### Planning Configuration

```javascript
window.Moss.configure({
    planning: {
        enabled: true,
        maxSteps: 20
    }
})
```

---

## Common Use Cases

### Privacy Mode Toggle

Allow users to disable session recording:

```javascript
function togglePrivacyMode(enabled) {
    window.Moss.configure({
        enableSessionRecording: !enabled,
        enableScreenHistoryRecording: !enabled
    })
}

// Usage
document.getElementById('privacy-toggle').addEventListener('change', (e) => {
    togglePrivacyMode(e.target.checked)
})
```

### Language Switching

Respond to user language preferences:

```javascript
function setLanguage(lang) {
    window.Moss.configure({ language: lang })
}

// Usage with a language selector
document.querySelectorAll('[data-lang]').forEach(btn => {
    btn.addEventListener('click', () => {
        setLanguage(btn.dataset.lang)
    })
})
```

### Feature Flags / A/B Testing

Enable features based on experiment groups:

```javascript
// After determining user's experiment group
if (userExperimentGroup === 'planning-enabled') {
    window.Moss.configure({
        planning: {
            enabled: true,
            maxSteps: 15
        }
    })
}
```

### Subscription Tier Adjustments

Adjust limits based on user subscription:

```javascript
function applySubscriptionSettings(tier) {
    const settings = {
        free: { planning: { enabled: false } },
        pro: { planning: { enabled: true, maxSteps: 10 } },
        enterprise: { planning: { enabled: true, maxSteps: 20 } }
    }

    window.Moss.configure(settings[tier] || settings.free)
}

// Apply when user logs in or subscription changes
applySubscriptionSettings(user.subscriptionTier)
```

---

## Settings Not Available at Runtime

Some settings cannot be changed after initialization:

| Setting | Reason |
|---------|--------|
| `applicationId` | Requires re-initialization |
| `userId` | Requires re-initialization |
| `useVision` | Application-level setting |
| `screenshotMode` | Technical constraint |
| `logLevel` | Set at initialization |
| `debugMode` | Set at initialization |
| `observeTargetSelector` | Requires DOM re-binding |
| `stability` | Technical constraint |
| `sessionConfig` | Session-level settings |

<Tip>
    To change these settings, you'll need to re-initialize the SDK with new
    parameters.
</Tip>

---

## Best Practices

### 1. Check SDK Availability

Always verify the SDK is loaded before calling configure:

```javascript
if (window.Moss && typeof window.Moss.configure === 'function') {
    window.Moss.configure({ language: 'ko' })
}
```

### 2. Batch Related Changes

Combine related settings into a single call:

```javascript
// Good - single call
window.Moss.configure({
    enableSessionRecording: false,
    enableScreenHistoryRecording: false
})

// Avoid - multiple calls
window.Moss.configure({ enableSessionRecording: false })
window.Moss.configure({ enableScreenHistoryRecording: false })
```

### 3. Document Configuration Changes

Track configuration changes for debugging:

```javascript
function configureMoss(options, reason) {
    console.log(`[Moss] Configuring: ${reason}`, options)
    window.Moss.configure(options)
}

configureMoss({ language: 'ko' }, 'User changed language preference')
```

---

## Next Steps

<CardGroup cols={2}>
    <Card
        title="Examples"
        icon="lightbulb"
        href="/en/configurations/examples"
    >
        See complete configuration examples
    </Card>
    <Card
        title="SDK Options"
        icon="code"
        href="/en/configurations/sdk-options"
    >
        Review all SDK initialization options
    </Card>
</CardGroup>
